const n=JSON.parse(`{"key":"v-990de7e4","path":"/posts/react/react-canvas.html","title":"react组件封装","lang":"zh-CN","frontmatter":{"icon":"edit","date":"2022-01-05T00:00:00.000Z","category":["前端框架"],"tag":["canvas"],"description":"react组件封装 水印组件封装 使用Canvas 生成水印，并使用 MutationObserve （可以监听DOM结构变化的接口）监视 DOM 的变动，使得水印不可被删除、且属性不可被修改 源码如下 import * as React from 'react'; import { watermark } from '../../utils/watermark' export default class WaterMark extends React.Component { constructor(props) { super(props); this.container = null; } componentDidMount () { const { style, ...options } = this.props; watermark({ container: this.container, ...options, }); } render () { const style = { position: 'relative', ...this.props.style, }; return ( &lt;div ref={(el) =&gt; this.container = el} id=\\"watermark\\" style={style}&gt; {this.props.children} &lt;/div&gt; ); } }","head":[["meta",{"property":"og:url","content":"https://github.com/wangdongovo/posts/react/react-canvas.html"}],["meta",{"property":"og:title","content":"react组件封装"}],["meta",{"property":"og:description","content":"react组件封装 水印组件封装 使用Canvas 生成水印，并使用 MutationObserve （可以监听DOM结构变化的接口）监视 DOM 的变动，使得水印不可被删除、且属性不可被修改 源码如下 import * as React from 'react'; import { watermark } from '../../utils/watermark' export default class WaterMark extends React.Component { constructor(props) { super(props); this.container = null; } componentDidMount () { const { style, ...options } = this.props; watermark({ container: this.container, ...options, }); } render () { const style = { position: 'relative', ...this.props.style, }; return ( &lt;div ref={(el) =&gt; this.container = el} id=\\"watermark\\" style={style}&gt; {this.props.children} &lt;/div&gt; ); } }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-03-02T14:57:24.000Z"}],["meta",{"property":"article:tag","content":"canvas"}],["meta",{"property":"article:published_time","content":"2022-01-05T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-03-02T14:57:24.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"react组件封装\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-01-05T00:00:00.000Z\\",\\"dateModified\\":\\"2023-03-02T14:57:24.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"水印组件封装","slug":"水印组件封装","link":"#水印组件封装","children":[]}],"git":{"createdTime":1677765415000,"updatedTime":1677769044000,"contributors":[{"name":"wd","email":"wd@192.168.0.101","commits":2}]},"readingTime":{"minutes":1.77,"words":532},"filePathRelative":"posts/react/react-canvas.md","localizedDate":"2022年1月5日","excerpt":"<h1> react组件封装</h1>\\n<h2> 水印组件封装</h2>\\n<p>使用Canvas 生成水印，并使用 MutationObserve （可以监听DOM结构变化的接口）监视 DOM 的变动，使得水印不可被删除、且属性不可被修改</p>\\n<p>源码如下</p>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token keyword\\">import</span> <span class=\\"token operator\\">*</span> <span class=\\"token keyword\\">as</span> React <span class=\\"token keyword\\">from</span> <span class=\\"token string\\">'react'</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token punctuation\\">{</span> watermark <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">from</span> <span class=\\"token string\\">'../../utils/watermark'</span>\\n\\n<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">WaterMark</span> <span class=\\"token keyword\\">extends</span> <span class=\\"token class-name\\">React<span class=\\"token punctuation\\">.</span>Component</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token function\\">constructor</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">props</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">super</span><span class=\\"token punctuation\\">(</span>props<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>container <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">null</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token punctuation\\">}</span>\\n\\n  <span class=\\"token function\\">componentDidMount</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">const</span> <span class=\\"token punctuation\\">{</span> style<span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">...</span>options <span class=\\"token punctuation\\">}</span> <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>props<span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token function\\">watermark</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token literal-property property\\">container</span><span class=\\"token operator\\">:</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>container<span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token operator\\">...</span>options<span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token punctuation\\">}</span>\\n\\n  <span class=\\"token function\\">render</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">const</span> style <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token literal-property property\\">position</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'relative'</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token operator\\">...</span><span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>props<span class=\\"token punctuation\\">.</span>style<span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">(</span>\\n      <span class=\\"token operator\\">&lt;</span>div ref<span class=\\"token operator\\">=</span><span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">el</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>container <span class=\\"token operator\\">=</span> el<span class=\\"token punctuation\\">}</span> id<span class=\\"token operator\\">=</span><span class=\\"token string\\">\\"watermark\\"</span> style<span class=\\"token operator\\">=</span><span class=\\"token punctuation\\">{</span>style<span class=\\"token punctuation\\">}</span><span class=\\"token operator\\">&gt;</span>\\n        <span class=\\"token punctuation\\">{</span><span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>props<span class=\\"token punctuation\\">.</span>children<span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token operator\\">&lt;</span><span class=\\"token operator\\">/</span>div<span class=\\"token operator\\">&gt;</span>\\n    <span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{n as data};
